{"ast":null,"code":"import _regeneratorRuntime from\"/Users/adhamtarek/Desktop/Portofolio Projects/Blog Website (MERN)/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/adhamtarek/Desktop/Portofolio Projects/Blog Website (MERN)/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/adhamtarek/Desktop/Portofolio Projects/Blog Website (MERN)/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./settings.css\";import Sidebar from\"../../components/sidebar/Sidebar\";import{useContext,useState}from\"react\";import{Context}from\"../../context/Context\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Settings(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),success=_useState10[0],setSuccess=_useState10[1];var _useContext=useContext(Context),user=_useContext.user,dispatch=_useContext.dispatch;var PF=\"https://verbalize.onrender.com/images/\";var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var updatedUser,data,filename,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();dispatch({type:\"UPDATE_START\"});updatedUser={userId:user.id,username:username,email:email,password:password};if(!file){_context.next=18;break;}data=new FormData();filename=Date.now()+file.name;data.append(\"name\",filename);data.append(\"file\",file);updatedUser.profilePic=filename;_context.prev=9;_context.next=12;return axios.post(\"https://verbalize.onrender.com/api/upload\",data);case 12:_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](9);console.error(\"err in upload\");console.log(_context.t0);case 18:_context.prev=18;console.log(user.id);console.log(updatedUser.userId);_context.next=23;return axios.put(\"https://verbalize.onrender.com/api/users/\"+user.id,updatedUser);case 23:res=_context.sent;setSuccess(true);dispatch({type:\"UPDATE_SUCCESS\",payload:res.data});_context.next=32;break;case 28:_context.prev=28;_context.t1=_context[\"catch\"](18);dispatch({type:\"UPDATE_FAILURE\"});console.log(\"im in settings in react\"+_context.t1);case 32:case\"end\":return _context.stop();}},_callee,null,[[9,14],[18,28]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"settings\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settingsWrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settingsTitle\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"settingsUpdateTitle\",children:\"Update Your Account\"}),/*#__PURE__*/_jsx(\"span\",{className:\"settingsDeleteTitle\",children:\"Delete Account\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"settingsForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Profile Picture\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"settingsPP\",children:[/*#__PURE__*/_jsx(\"img\",{src:file?URL.createObjectURL(file):PF+user.profilePic,alt:\"\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fileInput\",children:/*#__PURE__*/_jsx(\"i\",{className:\"settingsPPIcon far fa-user-circle\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileInput\",style:{display:\"none\"},onChange:function onChange(e){return setFile(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:user.username,onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:user.email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"settingsSubmit\",type:\"submit\",children:\"Update\"}),success&&/*#__PURE__*/_jsx(\"span\",{style:{color:\"green\",textAlign:\"center\",marginTop:\"20px\"},children:\"Profile has been updated...\"})]})]}),/*#__PURE__*/_jsx(Sidebar,{})]});}","map":{"version":3,"names":["Sidebar","useContext","useState","Context","axios","jsx","_jsx","jsxs","_jsxs","Settings","_useState","_useState2","_slicedToArray","file","setFile","_useState3","_useState4","username","setUsername","_useState5","_useState6","email","setEmail","_useState7","_useState8","password","setPassword","_useState9","_useState10","success","setSuccess","_useContext","user","dispatch","PF","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","updatedUser","data","filename","res","wrap","_callee$","_context","prev","next","preventDefault","type","userId","id","FormData","Date","now","name","append","profilePic","post","t0","console","error","log","put","sent","payload","t1","stop","_x","apply","arguments","className","children","onSubmit","src","URL","createObjectURL","alt","htmlFor","style","display","onChange","target","files","placeholder","value","color","textAlign","marginTop"],"sources":["/Users/adhamtarek/Desktop/Portofolio Projects/Blog Website (MERN)/client/src/pages/settings/Settings.jsx"],"sourcesContent":["import \"./settings.css\";\nimport Sidebar from \"../../components/sidebar/Sidebar\";\nimport { useContext, useState } from \"react\";\nimport { Context } from \"../../context/Context\";\nimport axios from \"axios\";\n\nexport default function Settings() {\n  const [file, setFile] = useState(null);\n  const [username, setUsername] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [success, setSuccess] = useState(false);\n\n  const { user, dispatch } = useContext(Context);\n  const PF = \"https://verbalize.onrender.com/images/\";\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    dispatch({ type: \"UPDATE_START\" });\n    const updatedUser = {\n      userId: user.id,\n      username,\n      email,\n      password,\n    };\n    if (file) {\n      const data = new FormData();\n      const filename = Date.now() + file.name;\n      data.append(\"name\", filename);\n      data.append(\"file\", file);\n      updatedUser.profilePic = filename;\n      try {\n        await axios.post(\"https://verbalize.onrender.com/api/upload\", data);\n      } catch (err) {\n        console.error(\"err in upload\");\n        console.log(err);\n      }\n    }\n    try {\n      console.log(user.id);\n      console.log(updatedUser.userId);\n      const res = await axios.put(\n        \"https://verbalize.onrender.com/api/users/\" + user.id,\n        updatedUser\n      );\n\n      setSuccess(true);\n      dispatch({ type: \"UPDATE_SUCCESS\", payload: res.data });\n    } catch (err) {\n      dispatch({ type: \"UPDATE_FAILURE\" });\n      console.log(\"im in settings in react\" + err);\n    }\n  };\n  return (\n    <div className=\"settings\">\n      <div className=\"settingsWrapper\">\n        <div className=\"settingsTitle\">\n          <span className=\"settingsUpdateTitle\">Update Your Account</span>\n          <span className=\"settingsDeleteTitle\">Delete Account</span>\n        </div>\n        <form className=\"settingsForm\" onSubmit={handleSubmit}>\n          <label>Profile Picture</label>\n          <div className=\"settingsPP\">\n            <img\n              src={file ? URL.createObjectURL(file) : PF + user.profilePic}\n              alt=\"\"\n            />\n            <label htmlFor=\"fileInput\">\n              <i className=\"settingsPPIcon far fa-user-circle\"></i>\n            </label>\n            <input\n              type=\"file\"\n              id=\"fileInput\"\n              style={{ display: \"none\" }}\n              onChange={(e) => setFile(e.target.files[0])}\n            />\n          </div>\n          <label>Username</label>\n          <input\n            type=\"text\"\n            placeholder={user.username}\n            onChange={(e) => setUsername(e.target.value)}\n          />\n          <label>Email</label>\n          <input\n            type=\"email\"\n            placeholder={user.email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n          <label>Password</label>\n          <input\n            type=\"password\"\n            onChange={(e) => setPassword(e.target.value)}\n          />\n          <button className=\"settingsSubmit\" type=\"submit\">\n            Update\n          </button>\n          {success && (\n            <span\n              style={{ color: \"green\", textAlign: \"center\", marginTop: \"20px\" }}\n            >\n              Profile has been updated...\n            </span>\n          )}\n        </form>\n      </div>\n      <Sidebar />\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}